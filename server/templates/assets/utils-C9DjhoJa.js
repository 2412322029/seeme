import{aT as f}from"./index-Ow1yCR_l.js";const x=f&&"loading"in document.createElement("img"),l=new WeakMap,c=new WeakMap,d=new WeakMap,M=(t,v,b)=>{if(!t)return()=>{};const r=function(o={}){var n;const{root:a=null}=o;return{hash:`${o.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(o.threshold)?o.threshold.join(","):(n=o.threshold)!==null&&n!==void 0?n:"0"}`,options:Object.assign(Object.assign({},o),{root:(typeof a=="string"?document.querySelector(a):a)||document.documentElement})}}(v),{root:h}=r.options;let s;const p=l.get(h);let i,e;p?s=p:(s=new Map,l.set(h,s)),s.has(r.hash)?(e=s.get(r.hash),e[1].has(t)||(i=e[0],e[1].add(t),i.observe(t))):(i=new IntersectionObserver(o=>{o.forEach(n=>{if(n.isIntersecting){const a=c.get(n.target),m=d.get(n.target);a&&a(),m&&(m.value=!0)}})},r.options),i.observe(t),e=[i,new Set([t])],s.set(r.hash,e));let g=!1;const u=()=>{g||(c.delete(t),d.delete(t),g=!0,e[1].has(t)&&(e[0].unobserve(t),e[1].delete(t)),e[1].size<=0&&s.delete(r.hash),s.size||l.delete(h))};return c.set(t,u),d.set(t,b),u};export{x as i,M as o};
