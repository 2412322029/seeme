import{d as B,R as r,M as A,N as P,B as N,T as U,W as K,b8 as M,r as f,K as R,cc as W,Y as $,Z as E,p as F,a1 as H,bo as Y,a5 as j,cd as Z}from"./index-uHSdsz2C.js";import{N as q}from"./Space-hGcNR6LJ.js";import{N as G}from"./Input-DUote18s.js";import{u as J}from"./use-locale-D1koWyT3.js";const L=B({name:"Add",render:()=>r("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}),Q=A("dynamic-tags",[A("input",{minWidth:"var(--n-input-width)"})]),te=B({name:"DynamicTags",props:Object.assign(Object.assign(Object.assign({},R.props),Z),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:a=>a},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),slots:Object,setup(a){const{mergedClsPrefixRef:v,inlineThemeDisabled:c}=K(a),{localeRef:y}=J("DynamicTags"),p=M(a),{mergedDisabledRef:n}=p,m=f(""),g=f(!1),h=f(!0),C=f(null),b=R("DynamicTags","-dynamic-tags",Q,W,a,v),w=f(a.defaultValue),I=$(a,"value"),l=E(I,w),V=F(()=>y.value.add),x=F(()=>function(e){switch(e){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw new Error(`${e} has no smaller size.`)}(a.size)),z=F(()=>n.value||!!a.max&&l.value.length>=a.max);function O(e){const{onChange:t,"onUpdate:value":s,onUpdateValue:T}=a,{nTriggerFormInput:k,nTriggerFormChange:o}=p;t&&j(t,e),T&&j(T,e),s&&j(s,e),w.value=e,k(),o()}function u(e){const t=e??m.value;if(t){const s=l.value.slice(0);s.push(a.onCreate(t)),O(s)}g.value=!1,h.value=!0,m.value=""}const S=F(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=c?H("dynamic-tags",void 0,S,a):void 0;return{mergedClsPrefix:v,inputInstRef:C,localizedAdd:V,inputSize:x,inputValue:m,showInput:g,inputForceFocused:h,mergedValue:l,mergedDisabled:n,triggerDisabled:z,handleInputKeyDown:function(e){e.key==="Enter"&&u()},handleAddClick:function(){g.value=!0,Y(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),h.value=!1})},handleInputBlur:function(){u()},handleCloseClick:function(e){const t=l.value.slice(0);t.splice(e,1),O(t)},handleInputConfirm:u,mergedTheme:b,cssVars:c?void 0:S,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:a,cssVars:v,mergedClsPrefix:c,onRender:y,renderTag:p}=this;return y==null||y(),r(q,{class:[`${c}-dynamic-tags`,this.themeClass],size:"small",style:v,theme:a.peers.Space,themeOverrides:a.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:n,tagClass:m,tagStyle:g,type:h,round:C,size:b,color:w,closable:I,mergedDisabled:l,showInput:V,inputValue:x,inputClass:z,inputStyle:O,inputSize:u,inputForceFocused:S,triggerDisabled:i,handleInputKeyDown:e,handleInputBlur:t,handleAddClick:s,handleCloseClick:T,handleInputConfirm:k,$slots:o}=this;return this.mergedValue.map((d,D)=>p?p(d,D):r(P,{key:D,theme:n.peers.Tag,themeOverrides:n.peerOverrides.Tag,class:m,style:g,type:h,round:C,size:b,color:w,closable:I,disabled:l,onClose:()=>{T(D)}},{default:()=>typeof d=="string"?d:d.label})).concat(V?o.input?o.input({submit:k,deactivate:t}):r(G,Object.assign({placeholder:"",size:u,style:O,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:x,onUpdateValue:d=>{this.inputValue=d},theme:n.peers.Input,themeOverrides:n.peerOverrides.Input,onKeydown:e,onBlur:t,internalForceFocus:S})):o.trigger?o.trigger({activate:s,disabled:i}):r(N,{dashed:!0,disabled:i,theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,size:u,onClick:s},{icon:()=>r(U,{clsPrefix:c},{default:()=>r(L,null)})}))}})}});export{te as N};
